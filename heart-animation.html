<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <title>Heart, Fireworks & Ghosts</title>
    <style>
      html,body{
        height:100%;
        margin: 0;
        overflow: hidden;
        background-color: white;
      }

      .bg_heart {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          overflow: hidden;
          z-index: 1;
      }

      canvas {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: 0;
      }

      .heart {
          position: absolute;
          top: -50%;
          transform: rotate(-45deg);
      }

      .heart:before,
      .heart:after {
          position: absolute;
          content: "";
          width: 100%;
          height: 100%;
          background: inherit;
          border-radius: 100%;
      }

      .heart:before {
          top: -50%;
          left: 0;
      }

      .heart:after {
          top: 0;
          right: -50%;
      }

      @keyframes love {
        0%{top:110%}
      }

      h1{
        position: fixed;
        top: 40%; 
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: 'Playfair Display', cursive;
        font-size: 5rem;
        z-index: 2;
        color: black;
      }

      .ghost {
        position: absolute;
        font-size: 3rem;
        transform: translate(-50%, -50%);
        animation: pop 1s ease-out forwards;
        pointer-events: none;
      }

      @keyframes pop {
        0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      }
    </style>
  </head>
  <body>
    <canvas id="fireworks"></canvas>
    <div class="bg_heart"></div>
    <h1>I love you</h1>

    <script>
      // Heart animation
      setInterval(function() {
        var r_num = Math.floor(Math.random() * 40) + 1;
        var r_size = Math.floor(Math.random() * 65) + 10;
        var r_left = Math.floor(Math.random() * 100) + 1;
        var r_bg = Math.floor(Math.random() * 25) + 100;
        var r_time = Math.floor(Math.random() * 5) + 5;

        $('.bg_heart').append("<div class='heart' style='width:" + r_size + "px;height:" + r_size + "px;left:" + r_left + "%;background:rgba(255," + (r_bg - 25) + "," + r_bg + ",1);animation:love " + r_time + "s ease'></div>");

        $('.bg_heart').append("<div class='heart' style='width:" + (r_size - 10) + "px;height:" + (r_size - 10) + "px;left:" + (r_left + r_num) + "%;background:rgba(255," + (r_bg - 25) + "," + (r_bg + 25) + ",1);animation:love " + (r_time + 5) + "s ease'></div>");

        $('.heart').each(function() {
            var top = $(this).css("top").replace(/[^-\d\.]/g, '');
            var width = $(this).css("width").replace(/[^-\d\.]/g, '');
            if (top <= -100 || width >= 150) {
                $(this).remove();
            }
        });
      }, 500);


      // Fireworks effect
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      let fireworks = [];
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      class Particle {
        constructor(x, y, color, angle, speed, decay) {
          this.x = x;
          this.y = y;
          this.color = color;
          this.angle = angle;
          this.speed = speed;
          this.alpha = 1;
          this.decay = decay;
          this.gravity = 0.05;
        }
        update() {
          this.x += Math.cos(this.angle) * this.speed;
          this.y += Math.sin(this.angle) * this.speed + this.gravity;
          this.speed *= 0.95;
          this.alpha -= this.decay;
        }
        draw() {
          ctx.fillStyle = `rgba(${this.color},${this.alpha})`;
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      class Firework {
        constructor(x, y) {
          this.particles = [];
          const colors = [
            "255,99,71",
            "135,206,250",
            "255,215,0",
            "0,255,127",
            "186,85,211",
            "255,182,193"
          ];
          const color = colors[Math.floor(Math.random() * colors.length)];
          for (let i = 0; i < 80; i++) {
            const angle = Math.random() * Math.PI * 2;
            const speed = Math.random() * 6 + 2;
            const decay = Math.random() * 0.02 + 0.01;
            this.particles.push(new Particle(x, y, color, angle, speed, decay));
          }
        }
        update() {
          this.particles.forEach((p, i) => {
            p.update();
            if (p.alpha <= 0) this.particles.splice(i, 1);
          });
        }
        draw() {
          this.particles.forEach(p => p.draw());
        }
      }

      function createFirework() {
        const x = Math.random() * canvas.width;
        const y = Math.random() * (canvas.height / 2);
        fireworks.push(new Firework(x, y));
      }

      function animate() {
        ctx.fillStyle = "rgba(255,255,255,0.2)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        fireworks.forEach((fw, i) => {
          fw.update();
          fw.draw();
          if (fw.particles.length === 0) fireworks.splice(i, 1);
        });

        requestAnimationFrame(animate);
      }

      // báº¯n phÃ¡o hoa tá»± Ä‘á»™ng
      setInterval(createFirework,1300);
      animate();

      // HÃ m táº¡o icon ðŸ‘»
      function spawnGhost(x, y) {
        const ghost = document.createElement("div");
        ghost.className = "ghost";
        ghost.style.left = x + "px";
        ghost.style.top = y + "px";
        ghost.textContent = "ðŸ‘»";
        document.body.appendChild(ghost);

        setTimeout(() => ghost.remove(), 3000);
      }

      // click chuá»™t trÃ¡i
      canvas.addEventListener("click", (e) => {
        e.preventDefault();
        spawnGhost(e.clientX, e.clientY);
      });

      // click chuá»™t pháº£i
      document.addEventListener("contextmenu", (e) => {
        e.preventDefault();
        spawnGhost(e.clientX, e.clientY);
      });

      // cháº¡m mÃ n hÃ¬nh (mobile)
      document.addEventListener("touchstart", (e) => {
        const touch = e.touches[0];
        spawnGhost(touch.clientX, touch.clientY);
      });

      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    </script>
  </body>
</html>
